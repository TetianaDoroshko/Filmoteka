const e={searchForm:document.querySelector(".search-form"),galleryContainer:document.querySelector(".gallery__container"),backdrop:document.querySelector(".backdrop")};async function t(){const e=new URL(API_URL+"/genre/movie/list");e.searchParams.set("api_key",API_KEY),e.searchParams.set("language","en-US");const t=await fetch(e);return(await t.json()).genres}async function a(e){console.log(e);const t=new URL(API_URL+"/search/movie");t.searchParams.set("api_key",API_KEY),t.searchParams.set("query",e);const a=await fetch(t),n=(await a.json()).results;return console.log(n),n}function n(t){const a=t.target.closest(".movie-card");if(a){(async function(e){console.log(e);const t=new URL(API_URL+"/movie/"+e);t.searchParams.set("api_key",API_KEY);const a=await fetch(t),n=await a.json();console.log(n)})(a.getAttribute("id")),e.backdrop.classList.remove("hidden")}}API_KEY="ed056b717633eb18d85d4433e906e4ce",API_URL="https://api.themoviedb.org/3",window.addEventListener("DOMContentLoaded",(async function(){await async function(a){const n=await t(),s=a.map((e=>{let t=e.genre_ids.map((e=>n.find((t=>t.id===e)).name));return t=t.join(", "),`\n        <article class="movie-card" id="${e.id}">\n        <div class="thumb">\n        <img class="movie-card__img" srcset="https://image.tmdb.org/t/p/w300${e.poster_path} 300w, https://image.tmdb.org/t/p/w500${e.poster_path} 500w" sizes="100%" alt="${e.title}"/>\n        </div>\n        <div class="movie-card__description">\n            <p class="movie-card__name">${e.title}</p>\n            <p class="movie-card__info">${t} | ${Number.parseInt(e.release_date)}</p>\n        </div>\n        </article>`})).join("");e.galleryContainer.innerHTML=s}(await async function(){const e=new URL(API_URL+"/trending/movie/day");e.searchParams.set("api_key",API_KEY);const t=await fetch(e),a=await t.json();return a.results}()),e.galleryContainer.addEventListener("click",n,{capture:!0})})),e.searchForm.addEventListener("submit",(async function(n){n.preventDefault();const s=n.target.elements.searchQuery.value;await async function(a){console.log(a);const n=await t(),s=a.map((e=>{let t=e.genre_ids.map((e=>n.find((t=>t.id===e)).name));return t=t.join(", "),`\n        <article class="movie-card" id="${e.id}">\n        <div class="thumb">\n        <img class="movie-card__img" srcset="https://image.tmdb.org/t/p/w300${e.poster_path} 300w, https://image.tmdb.org/t/p/w500${e.poster_path} 500w" sizes="100%" alt="${e.title}"/>\n        </div>\n        <div class="movie-card__description">\n            <p class="movie-card__name">${e.title}</p>\n            <p class="movie-card__info">${t} | ${Number.parseInt(e.release_date)}</p>\n        </div>\n        </article>`})).join("");e.galleryContainer.innerHTML=s}(await a(s)),e.searchForm.reset(a())}));
//# sourceMappingURL=index.f2049bbe.js.map
