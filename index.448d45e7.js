const t={searchForm:document.querySelector(".search-form"),galleryContainer:document.querySelector(".gallery__container"),backdrop:document.querySelector(".backdrop")};async function e(){const t=new URL(API_URL+"/genre/movie/list");t.searchParams.set("api_key",API_KEY),t.searchParams.set("language","en-US");const e=await fetch(t);return(await e.json()).genres}async function n(t){console.log(t);const e=new URL(API_URL+"/search/movie");e.searchParams.set("api_key",API_KEY),e.searchParams.set("query",t);const n=await fetch(e),a=(await n.json()).results;return console.log(a),a}async function a(e){const n=e.target.closest(".movie-card");if(n){const e=n.getAttribute("id");await function(e){console.log("movieInfo2",e),t.backdrop.classList.remove("hidden");const n=e.genres.map((t=>t.name)).join(", ");console.log(n);const a=`\n  <div class="modal">\n    <button type="button" class="btn-close"></button>\n    <img class="modal__img" srcset="https://image.tmdb.org/t/p/w300${e.poster_path} 300w, https://image.tmdb.org/t/p/w500${e.poster_path} 500w" src="https://image.tmdb.org/t/p/w200${e.poster_path}" sizes="100%" alt="${e.title}">\n    <h2>${e.title}</h2>\n<div class="modal__titre">\n      <p>Vote / Votes</p>\n      <p>\n        <span class="accent">${e.vote_average}</span> /\n        ${e.vote_count}\n      </p>\n      <p>Popularity</p>\n      <p>${e.popularity}</p>\n      <p>Original Title</p>\n      <p>${e.original_title}</p>\n      <p>Genre</p>\n      <p>${n}</p>\n    </div>    <h3>About</h3>\n    <p>${e.overview}</p>\n    <button type="button modal__btn">Add to watced</button>\n    <button type="button modal__btn">Add to queue</button>\n  </div>`;t.backdrop.innerHTML=a}(await async function(t){console.log(t);const e=new URL(API_URL+"/movie/"+t);e.searchParams.set("api_key",API_KEY);const n=await fetch(e),a=await n.json();return console.log("movieInfo",a),a}(e))}}API_KEY="ed056b717633eb18d85d4433e906e4ce",API_URL="https://api.themoviedb.org/3",window.addEventListener("DOMContentLoaded",(async function(){await async function(n){const a=await e();console.log(a);const s=n.map((t=>{let e=t.genre_ids.map((t=>a.find((e=>e.id===t)).name));return e=e.join(", "),`\n        <article class="movie-card" id="${t.id}">\n        <div class="thumb">\n        <img class="movie-card__img" srcset="https://image.tmdb.org/t/p/w300${t.poster_path} 300w, https://image.tmdb.org/t/p/w500${t.poster_path} 500w" sizes="100%" alt="${t.title}"/>\n        </div>\n        <div class="movie-card__description">\n            <p class="movie-card__name">${t.title}</p>\n            <p class="movie-card__info">${e} | ${Number.parseInt(t.release_date)}</p>\n        </div>\n        </article>`})).join("");t.galleryContainer.innerHTML=s}(await async function(){const t=new URL(API_URL+"/trending/movie/day");t.searchParams.set("api_key",API_KEY);const e=await fetch(t),n=await e.json();return n.results}()),t.galleryContainer.addEventListener("click",a,{capture:!0})})),t.searchForm.addEventListener("submit",(async function(a){a.preventDefault();const s=a.target.elements.searchQuery.value;await async function(n){console.log("movieSet",n);const a=await e(),s=n.map((t=>{let e=t.genre_ids.map((t=>a.find((e=>e.id===t)).name));return e=e.join(", "),`\n        <article class="movie-card" id="${t.id}">\n        <div class="thumb">\n        <img class="movie-card__img" srcset="https://image.tmdb.org/t/p/w300${t.poster_path} 300w, https://image.tmdb.org/t/p/w500${t.poster_path} 500w" sizes="100%" alt="${t.title}"/>\n        </div>\n        <div class="movie-card__description">\n            <p class="movie-card__name">${t.title}</p>\n            <p class="movie-card__info">${e} | ${Number.parseInt(t.release_date)}</p>\n        </div>\n        </article>`})).join("");t.galleryContainer.innerHTML=s}(await n(s)),t.searchForm.reset(n())}));
//# sourceMappingURL=index.448d45e7.js.map
